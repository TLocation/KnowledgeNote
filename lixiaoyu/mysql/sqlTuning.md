#####mysql调优
```
MySql 在执行查询的时候一般情况下 只会用到一个索引 一条sql有多个索引的情况（由优化器来判断该用哪个比较快）
```

####性能分析思路
##1.首先需要使用【慢查询日志】功能，去获取所有查询时间比较长的sql语句。
##2.其次【查看执行计划】查看有问题的sql的执行计划。
##3.最后可以使用【show profile[s]】查看有问题的sql的性能使用情况。


####mysql索引
```
1.索引是：高效获取数据的数据结构（B+树数据结构）
		索引包括：聚集索引，覆盖索引，组合索引，前缀索引，唯一索引等。
（索引会存磁盘，大了一定不好）

2.优势：
	1.可以提高数据查询的效率，降低数据库的IO成本，相当于书的目录
	2.索引支持对数据进行排序。降低数据排序的成本，降低 cpu的消耗
3.劣势：
	1.索引会占据磁盘空间（磁盘空间占的越大，读取索引耗时越多）
	2.索引虽然会提高查询效率，但是会降低更新表的效率（在增删改的时候就会对索引的表结构进行变更）
```

###常用索引分类
```
‘主键索引’效果最好 其次是 ‘组合索引’

1.单列索引：
	*普通索引：mysql基本索引类型，没有限制，允许在定义索引的列中插入重复值和空值，数据更快一点。
	*唯一索引：索引列中的值必须是唯一的 但是可以为空。
	*主键索引：是一种特殊的唯一所有，不许有空值。

2.组合索引：
	*在表中的所个字段组合上创建的一个索引。
	*最左前缀原则（最左匹配原则）
	*建议使用组合索引，代替单个所引

```


###索引使用（待测试）
```

```


###索引存储结构
#B树 和 B+树
B树3层可以存bigint类型10亿条
```
B树：非叶子节点和叶子节点都会存储数据
B+树：只有叶子节点会存数据 ，非叶子节点不存数据只存指针
```

#聚集索引 innoDB   表数据和索引是存在一起的就交聚集索引
```
id 是主键------主键索引(有且只有一个)
name 非唯一索引 ---- 辅助索引(可以有多个)
例如：select *  from  student where id = 1 and name = '李晓钰'


(不要用特别长的字段作为主键)
(如果没有主键就会找一个唯一非空列，如果找不到就会默认创建一个隐藏列)
1.主键索引：数据就是指数据行，就是一行记录。

2.辅助索引：存的索引字段和主键值

```
#聚集索引
##聚集索引(叶子节点存的是主键值)，聚集索引(叶子节点存的是地址值)




####组合索引    创建的顺序特别重要   （创建顺序的选择也是优化的目标）
```
创建下面这个组合索引，相当于创建了c1,c1 c2 ,c1 c2 c3  3个索引
例如:AL RABLE 'table_name' ADD INDEX index_name('c1','c2','c3')       就是创建了一棵B+树 但是他相当于3棵索引树的功效


最左匹配原则:mysql 从左往右执行，oracle 从右往左执行   知道遇到范围查询停止(< , > , between , ....)
如果创建索引的顺序是 （a,b,c,d）顺序 a = 1 and b = 2 and c > 3 and d = 4  他到了abc就不走了 因为
	c是范围查询，
	(最左匹配   需进行测试)
	
	1 = 1 索引优化就抛弃了  不是很好的写法






```


####如何使用索引
###那些情况需要创建索引
```
1.主键自动创建唯一索引    一般最好建立主键
2.经常作为查询的字段 作为索引
3.多表关联的时候，关联字段建为索引
4.查询中统计或者分组字段  应该创建索引
5.查询中排序字段   应该创建索引
```



###哪些情况不需要创建索引
```
1.表记录太少  加索引浪费内存
2.经常增删改
3.频繁更新的字段
4.where 条件不常用的字段

```



